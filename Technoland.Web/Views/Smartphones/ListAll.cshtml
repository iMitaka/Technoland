<div class="row">
    @using (Html.BeginForm("Search", "Smartphones", FormMethod.Post))
    {
        <div class="col-lg-2">
            <divs>
                <strong>Производител:</strong>
            </divs>
            @(Html.Kendo()
        .DropDownList()
        .Name("manufsearch")
        .DataTextField("ManufacturerName")
        .DataValueField("ManufacturerName")
        .OptionLabel("All")
        .DataSource(data =>
        {
            data.Read(read => read.Action("GetSmartphoneManufacturerData", "Smartphones"));
            data.ServerFiltering(true);
        }))
        </div>
        <div class="col-lg-2">
            <div>
                <strong>Модел:</strong>
            </div>
            @(Html.Kendo()
            .AutoComplete()
            .Name("modelsearch")
            .DataTextField("Model")
            .MinLength(3)
            .Placeholder("Enter model")
            .DataSource(data =>
            {
                data.Read(read =>
                    {
                        read.Action("GetSmartphoneModelData", "Smartphones")
                            .Data("onAdditionalData");
                    })
                    .ServerFiltering(true);
            }))
        </div>
        <div class="col-lg-2">
            <div>
                <strong>Цена:</strong>
            </div>
            @(Html.Kendo()
        .NumericTextBox()
        .Name("pricesearch")
        .Min(600)
        .Max(3000))
        </div>
        <div>
            <br />
            <input type="submit" value="Търси" class="btn btn-info" />
        </div>
    }
</div>
<br />
@model  ICollection<Technoland.Web.Models.SmartphoneViewModel>
@{
    ViewBag.Title = "ListAll";
}
<style>
    .img-responsive {
        max-width: 70%;
    }
</style>
<div class="alert alert-dismissible alert-info">
    <strong>Смартфони (@Model.Count())</strong>
</div>
<div class="row">
    @for (int i = 0; i < Model.Count(); i++)
    {
        var smartphone = Model.ElementAt(i);
        <div class="col-md-4 panel-primary">
            <p><a href="@Url.Action("Details", "Smartphones", new { smartphone.Id })"><img width="200" class="center-block img-responsive" src="@smartphone.ImageUrl" /></a></p>
            <h5 class="text-center"><strong>(@smartphone.Votes гласа)</strong></h5>
            <hr />
            <a href="@Url.Action("Details", "Smartphones", new { smartphone.Id })"><h3 class="text-center">@smartphone.Manufacturer @smartphone.Model</h3></a>
            <p><a class="btn center-block btn-primary" href="@Url.Action("Details", "Smartphones", new { smartphone.Id })">Цена: @smartphone.Price лв.</a></p>
        </div>

        if (i > 0 && (i + 1) % 3 == 0)
        {
            @:</div>
        @:<div class="row">
        }
    }
</div>
<script>
    function onAdditionalData() {
        return {
            text: $('#modelsearch').val()
        };
    }
</script>
